# Gemini Code Assistant Project Overview

This document provides a summary of the `sj-trading` project, generated by the Gemini Code Assistant.

## Project Purpose

The `sj-trading` project is a Python-based trading application designed to interact with the Shioaji API for stock and futures trading. It includes functionalities for placing orders, managing real-time quote data, and handling trading logic.

## Key Technologies

- **Python**: The core programming language.
- **Shioaji**: The primary library for connecting to the Sinopac trading API.
- **Polars**: Used for high-performance data manipulation and analysis of trading data.
- **polars-talib**: For technical analysis on Polars DataFrames.
- **uv**: Manages Python packaging and virtual environments.
- **Typer**: Used for creating command-line interfaces (CLIs).

## Core Modules

The project's main logic is located in the `src/sj_trading/` directory.

### `src/sj_trading/quote.py`

This module defines the `QuoteManager` class, which is responsible for:
- Subscribing to and handling real-time tick data for both stocks (`STK`) and futures/options (`FOP`).
- Storing tick data in Polars DataFrames for efficient processing.
- Fetching historical tick data.
- Unsubscribing from data streams.
- Aggregating tick data into k-bars (candlesticks).

### `src/sj_trading/testing_flow.py`

This file contains functions for testing and demonstrating the core functionalities of the application:
- `testing_stock_ordering()`: A function to test placing a stock order.
- `testing_futures_ordering()`: A function to test placing a futures order.
- `futures_quote()`: A function to subscribe to and display real-time futures quotes.

## Available Scripts

The `pyproject.toml` file defines several command-line scripts for easy execution of common tasks:

- `hello`: A simple hello world script.
- `main`: The main entry point of the application.
- `version`: Displays the application's version.
- `stock_testing`: Executes the stock order testing flow.
- `futures_testing`: Executes the futures order testing flow.
- `futures_quote`: Executes the futures quote subscription flow.

To run any of these scripts, you can use a command like `python -m sj_trading.testing_flow:futures_quote` from the project root, or if the package is installed in editable mode, you can use the script name directly (e.g., `futures_quote`).

---

# Gemini Code Assistant 專案概覽 (中文版)

本文件提供了由 Gemini Code Assistant 產生的 `sj-trading` 專案摘要。

## 專案目的

`sj-trading` 專案是一個基於 Python 的交易應用程式，設計用於與 Shioaji API 互動，進行股票和期貨交易。它包含下單、管理即時報價數據和處理交易邏輯的功能。

## 關鍵技術

- **Python**: 核心程式語言。
- **Shioaji**: 用於連接永豐金控交易 API 的主要函式庫。
- **Polars**: 用於對交易數據進行高效能的數據操作與分析。
- **polars-talib**: 用於在 Polars DataFrame 上進行技術分析。
- **uv**: 用於管理 Python 套件和虛擬環境。
- **Typer**: 用於建立命令列介面 (CLI)。

## 核心模組

專案的主要邏輯位於 `src/sj_trading/` 目錄中。

### `src/sj_trading/quote.py`

此模組定義了 `QuoteManager` 類別，負責：
- 訂閱和處理股票（`STK`）和期貨/選擇權（`FOP`）的即時 tick 數據。
- 將 tick 數據儲存在 Polars DataFrame 中以便高效處理。
- 擷取歷史 tick 數據。
- 取消訂閱數據流。
- 將 tick 數據匯總成 K 棒（K線）。

### `src/sj_trading/testing_flow.py`

此檔案包含用於測試和展示應用程式核心功能的多個函式：
- `testing_stock_ordering()`: 測試下單股票的函式。
- `testing_futures_ordering()`: 測試下單期貨的函式。
- `futures_quote()`: 訂閱並顯示即時期貨報價的函式。

## 可用腳本

`pyproject.toml` 檔案定義了幾個命令列腳本，以便輕鬆執行常見任務：

- `hello`: 一個簡單的 hello world 腳本。
- `main`: 應用程式的主要進入點。
- `version`: 顯示應用程式版本。
- `stock_testing`: 執行股票下單測試流程。
- `futures_testing`: 執行期貨下單測試流程。
- `futures_quote`: 執行期貨報價訂閱流程。

若要執行這些腳本，您可以在專案根目錄下使用像 `python -m sj_trading.testing_flow:futures_quote` 這樣的指令，或者如果套件是以可編輯模式安裝的，您可以直接使用腳本名稱（例如 `futures_quote`）。